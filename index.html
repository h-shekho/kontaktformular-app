<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Kontaktformular</title>
</head>
<body>
    <div id="lightning"></div>
    <script src="https://beyerdynamic--devverve.sandbox.my.site.com/faq/lightning/lightning.out.js"></script>
    <script>
        let appComponent;
        
        $Lightning.use("c:ReklamationsformularOut", function() {
            createComponent('kontaktFormularStartseite', { selectedLanguage: 'de' });
        }, "https://beyerdynamic--devverve.sandbox.my.site.com/faq/");

        function createComponent(componentName, attributes) {
            // Bestehende Komponente zerstören
            if (appComponent) {
                appComponent.destroy();
            }
            
            // Container leeren
            document.getElementById('lightning').innerHTML = '';
            
            // Neue Komponente erstellen
            $Lightning.createComponent(
                "c:" + componentName,
                attributes || {},
                "lightning",
                function(cmp, status, error) {
                    if (status === "SUCCESS") {
                        appComponent = cmp;
                        console.log('Component created:', componentName);
                    } else {
                        console.error('Error creating component:', error);
                    }
                }
            );
        }

        // Globaler Event-Listener für Navigation
        window.addEventListener('componentNavigation', function(event) {
            const { componentName, attributes } = event.detail;
            createComponent(componentName, attributes);
        }, false);
    </script>
</body>
</html>
